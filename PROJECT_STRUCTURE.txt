Memoiz Project Snapshot
=======================

Root
----
- `README.md`
- `AGENTS.md`
- `LICENSE`
- `build.gradle.kts`, `settings.gradle.kts`, `gradle.properties`
- `gradlew`, `gradlew.bat`, `gradle/`
- `app/`

`app/`
-----
- `build.gradle.kts`
- `proguard-rules.pro`
- `src/main/`
  - `AndroidManifest.xml`
  - `java/com/machi/memoiz/`
    - `MemoizApplication.kt`, `MainActivity.kt`
    - `boot/` (startup hooks)
    - `data/` (Room entities, DAOs, repositories, database)
    - `domain/` (`Memo`, `MemoGroup`, DTOs)
    - `processtext/` and `share/` entry activities
    - `service/` (`AiCategorizationService`, `MlKitCategorizer`, `CategoryMergeService`, helpers) — contains model management, download logic, and image-analysis fallback logic (image description → prompt fallback). Batch re-analysis flows have been removed from default background workers; per-memo retries remain.
    - `worker/` (`ClipboardProcessingWorker` etc.)
    - `ui/`
      - `screens/` (`MainScreen`, `SettingsScreen`), view models — `SettingsScreen` now displays AI feature status (Enabled/Disabled/Downloading/Error)
      - `theme/` (Material 3 theme tokens)
      - `ViewModelFactory.kt`
    - `util/` (`UsageStatsHelper`, `ImageUriManager`, formatters). `ImageUriManager` helps determine whether an image memo has an app-local copy (used to select pin color: red for local copy, blue for URI-only).
  - `res/`
    - `values/` + `values-ja/` (strings, themes)
    - `drawable*/`, `mipmap*/`, `xml/` (backup/data extraction rules)

Build Output Highlights
-----------------------
- `app/build/outputs/apk/` → APK artifacts
- `app/build/outputs/` (baseline profiles, metadata)

Auxiliary
---------
- `genai_sample/` (sample ML Kit reference)
- `.github/` (CI workflows)
